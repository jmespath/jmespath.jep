<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>0003-functions - JMESPath Enhancement Proposals</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="overview.html">Overview</a></li><li class="chapter-item expanded affix "><a href="0001-nested-expressions.html">0001-nested-expressions</a></li><li class="chapter-item expanded affix "><a href="0003-functions.html" class="active">0003-functions</a></li><li class="chapter-item expanded affix "><a href="0004-pipes.html">0004-pipes</a></li><li class="chapter-item expanded affix "><a href="0005-array-slices.html">0005-array-slices</a></li><li class="chapter-item expanded affix "><a href="0006-improved-identifiers.html">0006-improved-identifiers</a></li><li class="chapter-item expanded affix "><a href="0007-filter-expressions.html">0007-filter-expressions</a></li><li class="chapter-item expanded affix "><a href="0008-exptype.html">0008-exptype</a></li><li class="chapter-item expanded affix "><a href="0009-improved.filters.html">0009-improved.filters</a></li><li class="chapter-item expanded affix "><a href="0010-slice-projects.html">0010-slice-projects</a></li><li class="chapter-item expanded affix "><a href="0011-let-function.html">0011-let-function</a></li><li class="chapter-item expanded affix "><a href="0012-raw-string-literals.html">0012-raw-string-literals</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">JMESPath Enhancement Proposals</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="functions"><a class="header" href="#functions">Functions</a></h1>
<ul>
<li>JEP: 3</li>
<li>Author: Michael Dowling, James Saryerwinnie</li>
<li>Created: 2013-11-27</li>
</ul>
<h2 id="abstract"><a class="header" href="#abstract">Abstract</a></h2>
<p>This document proposes modifying the
<a href="https://jmespath.org/specification.html#grammar">JMESPath grammar</a>
to support function expressions.</p>
<h2 id="motivation"><a class="header" href="#motivation">Motivation</a></h2>
<p>Functions allow users to easily transform and filter data in JMESPath
expressions. As JMESPath is currently implemented, functions would be very
useful in <code>multi-select-list</code> and <code>multi-select-hash</code> expressions to format
the output of an expression to contain data that might not have been in the
original JSON input. Combined with filtered expressions, functions would be a
powerful mechanism to perform any kind of special comparisons for things like
<code>length()</code>, <code>contains()</code>, etc.</p>
<h2 id="data-types"><a class="header" href="#data-types">Data Types</a></h2>
<p>In order to support functions, a type system is needed.  The JSON types are
used:</p>
<ul>
<li>
<p>number (integers and double-precision floating-point format in JSON)</p>
</li>
<li>
<p>string</p>
</li>
<li>
<p>boolean (<code>true</code> or <code>false</code>)</p>
</li>
<li>
<p>array (an ordered, sequence of values)</p>
</li>
<li>
<p>object (an unordered collection of key value pairs)</p>
</li>
<li>
<p>null</p>
</li>
</ul>
<h2 id="syntax-changes"><a class="header" href="#syntax-changes">Syntax Changes</a></h2>
<p>Functions are defined in the <code>function-expression</code> rule below.  A function
expression is an <code>expression</code> itself, and is valid any place an
<code>expression</code> is allowed.</p>
<p>The grammar will require the following grammar additions:</p>
<pre><code>function-expression = unquoted-string  (
                        no-args  /
                        one-or-more-args )
no-args             = &quot;(&quot; &quot;)&quot;
one-or-more-args    = &quot;(&quot; ( function-arg *( &quot;,&quot; function-arg ) ) &quot;)&quot;
function-arg        = expression / number / current-node
current-node        = &quot;@&quot;
</code></pre>
<p><code>expression</code> will need to be updated to add the <code>function-expression</code>
production:</p>
<pre><code>expression        = sub-expression / index-expression / or-expression / identifier / &quot;*&quot;
expression        =/ multi-select-list / multi-select-hash
expression        =/ literal / function-expression
</code></pre>
<p>A function can accept any number of arguments, and each argument can be an
expression.  Each function must define a signature that specifies the number
and allowed types of its expected arguments.  Functions can be variadic.</p>
<h3 id="current-node"><a class="header" href="#current-node">current-node</a></h3>
<p>The <code>current-node</code> token can be used to represent the current node being
evaluated. The <code>current-node</code> token is useful for functions that require the
current node being evaluated as an argument. For example, the following
expression creates an array containing the total number of elements in the
<code>foo</code> object followed by the value of <code>foo[&quot;bar&quot;]</code>.</p>
<pre><code>foo[].[count(@), bar]
</code></pre>
<p>JMESPath assumes that all function arguments operate on the current node unless
the argument is a <code>literal</code> or <code>number</code> token.  Because of this, an
expression such as <code>@.bar</code> would be equivalent to just <code>bar</code>, so the
current node is only allowed as a bare expression.</p>
<h4 id="current-node-state"><a class="header" href="#current-node-state">current-node state</a></h4>
<p>At the start of an expression, the value of the current node is the data
being evaluated by the JMESPath expression. As an expression is evaluated, the
value the the current node represents MUST change to reflect the node currently
being evaluated. When in a projection, the current node value MUST be changed
to the node currently being evaluated by the projection.</p>
<h2 id="function-evaluation"><a class="header" href="#function-evaluation">Function Evaluation</a></h2>
<p>Functions are evaluated in applicative order.  Each argument must be an
expression, each argument expression must be evaluated before evaluating the
function.  The function is then called with the evaluated function arguments.
The result of the <code>function-expression</code> is the result returned by the
function call.  If a <code>function-expression</code> is evaluated for a function that
does not exist, the JMESPath implementation must indicate to the caller that an
<code>unknown-function</code> error occurred.  How and when this error is raised is
implementation specific, but implementations should indicate to the caller that
this specific error occurred.</p>
<p>Functions can either have a specific arity or be variadic with a minimum
number of arguments.  If a <code>function-expression</code> is encountered where the
arity does not match or the minimum number of arguments for a variadic function
is not provided, then implementations must indicate to the caller than an
<code>invalid-arity</code> error occurred.  How and when this error is raised is
implementation specific.</p>
<p>Each function signature declares the types of its input parameters.  If any
type constraints are not met, implementations must indicate that an
<code>invalid-type</code> error occurred.</p>
<p>In order to accommodate type contraints, functions are provided to convert
types to other types (<code>to_string</code>, <code>to_number</code>) which are defined below.
No explicit type conversion happens unless a user specifically uses one of
these type conversion functions.</p>
<p>Function expressions are also allowed as the child element of a sub expression.
This allows functions to be used with projections, which can enable functions
to be applied to every element in a projection.  For example, given the input
data of <code>[&quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;notanumber&quot;, true]</code>, the following expression can
be used to convert (and filter) all elements to numbers:</p>
<pre><code>search([].to_number(@), ``[&quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;notanumber&quot;, true]``) -&gt; [1, 2, 3]
</code></pre>
<p>This provides a simple mechanism to explicitly convert types when needed.</p>
<h2 id="built-in-functions"><a class="header" href="#built-in-functions">Built-in Functions</a></h2>
<p>JMESPath has various built-in functions that operate on different
data types, documented below.  Each function below has a signature
that defines the expected types of the input and the type of the returned
output:</p>
<pre><code>return_type function_name(type $argname)
return_type function_name2(type1|type2 $argname)
</code></pre>
<p>If a function can accept multiple types for an input value, then the
multiple types are separated with <code>|</code>.  If the resolved arguments do not
match the types specified in the signature, an <code>invalid-type</code> error occurs.</p>
<p>The <code>array</code> type can further specify requirements on the type of the elements
if they want to enforce homogeneous types.  The subtype is surrounded by
<code>[type]</code>, for example, the function signature below requires its input
argument resolves to an array of numbers:</p>
<pre><code>return_type foo(array[number] $argname)
</code></pre>
<p>As a shorthand, the type <code>any</code> is used to indicate that the argument can be
of any type (<code>array|object|number|string|boolean|null</code>).</p>
<p>The first function below, <code>abs</code> is discussed in detail to demonstrate the
above points.  Subsequent function definitions will not include these details
for brevity, but the same rules apply.</p>
<p><strong>NOTE</strong>: All string related functions are defined on the basis of Unicode code
points; they do not take normalization into account.</p>
<h3 id="abs"><a class="header" href="#abs">abs</a></h3>
<pre><code>number abs(number $value)
</code></pre>
<p>Returns the absolute value of the provided argument.  The signature indicates
that a number is returned, and that the input argument <code>$value</code> <strong>must</strong>
resolve to a number, otherwise a <code>invalid-type</code> error is triggered.</p>
<p>Below is a worked example.  Given:</p>
<pre><code>{&quot;foo&quot;: -1, &quot;bar&quot;: &quot;2&quot;}
</code></pre>
<p>Evaluating <code>abs(foo)</code> works as follows:</p>
<ol>
<li>Evaluate the input argument against the current data:</li>
</ol>
<pre><code>search(foo, {&quot;foo&quot;: -11, &quot;bar&quot;: 2&quot;}) -&gt; -1
</code></pre>
<ol start="2">
<li>
<p>Validate the type of the resolved argument.  In this case
<code>-1</code> is of type <code>number</code> so it passes the type check.</p>
</li>
<li>
<p>Call the function with the resolved argument:</p>
</li>
</ol>
<pre><code>abs(-1) -&gt; 1
</code></pre>
<ol start="4">
<li>
<p>The value of <code>1</code> is the resolved value of the function expression</p>
<p><code>abs(foo)</code>.</p>
</li>
</ol>
<p>Below is the same steps for evaluating <code>abs(bar)</code>:</p>
<ol>
<li>Evaluate the input argument against the current data:</li>
</ol>
<pre><code>search(foo, {&quot;foo&quot;: -1, &quot;bar&quot;: 2&quot;}) -&gt; &quot;2&quot;
</code></pre>
<ol start="2">
<li>Validate the type of the resolved argument.  In this case
<code>&quot;2</code> is of type <code>string</code> so the immediate indicate that
an <code>invalid-type</code> error occurred.</li>
</ol>
<p>As a final example, here is the steps for evaluating <code>abs(to_number(bar))</code>:</p>
<ol>
<li>Evaluate the input argument against the current data:</li>
</ol>
<pre><code>search(to_number(bar), {&quot;foo&quot;: -1, &quot;bar&quot;: &quot;2&quot;})
</code></pre>
<ol start="2">
<li>In order to evaluate the above expression, we need to evaluate
<code>to_number(bar)</code>:</li>
</ol>
<pre><code>search(bar, {&quot;foo&quot;: -1, &quot;bar&quot;: &quot;2&quot;}) -&gt; &quot;2&quot;
# Validate &quot;2&quot; passes the type check for to_number, which it does.
to_number(&quot;2&quot;) -&gt; 2
</code></pre>
<ol start="3">
<li>Now we can evaluate the original expression:</li>
</ol>
<pre><code>search(to_number(bar), {&quot;foo&quot;: -1, &quot;bar&quot;: &quot;2&quot;}) -&gt; 2
</code></pre>
<ol start="4">
<li>Call the function with the final resolved value:</li>
</ol>
<pre><code>abs(2) -&gt; 2
</code></pre>
<ol start="5">
<li>The value of <code>2</code> is the resolved value of the function expression
<code>abs(to_number(bar))</code>.</li>
</ol>
<h3 id="examples"><a class="header" href="#examples">Examples</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Expression</th><th>Result</th></tr></thead><tbody>
<tr><td><code>abs(1)</code></td><td>1</td></tr>
<tr><td><code>abs(-1)</code></td><td>1</td></tr>
<tr><td><code>abs(`abc`)</code></td><td></td></tr>
</tbody></table>
</div>
<h3 id="avg"><a class="header" href="#avg">avg</a></h3>
<pre><code>number avg(array[number] $elements)
</code></pre>
<p>Returns the average of the elements in the provided array.</p>
<p>An empty array will produce a return value of null.</p>
<h3 id="examples-1"><a class="header" href="#examples-1">Examples</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Given</th><th>Expression</th><th>Result</th></tr></thead><tbody>
<tr><td><code>[10, 15, 20]</code></td><td><code>avg(@)</code></td><td>15</td></tr>
<tr><td><code>[10, false, 20]</code></td><td><code>avg(@)</code></td><td><code>&lt;error: invalid-type&gt;</code></td></tr>
<tr><td><code>[false]</code></td><td><code>avg(@)</code></td><td><code>&lt;error: invalid-type&gt;</code></td></tr>
<tr><td><code>false</code></td><td><code>avg(@)</code></td><td><code>&lt;error: invalid-type&gt;</code></td></tr>
</tbody></table>
</div>
<h3 id="ceil"><a class="header" href="#ceil">ceil</a></h3>
<pre><code>number ceil(number $value)
</code></pre>
<p>Returns the next highest integer value by rounding up if necessary.</p>
<h3 id="examples-2"><a class="header" href="#examples-2">Examples</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Expression</th><th>Result</th></tr></thead><tbody>
<tr><td><code>ceil(`1.001`)</code></td><td>2</td></tr>
<tr><td><code>ceil(`1.9`)</code></td><td>2</td></tr>
<tr><td><code>ceil(`1`)</code></td><td>1</td></tr>
<tr><td><code>ceil(`abc`)</code></td><td><code>null</code></td></tr>
</tbody></table>
</div>
<p>| ### contains</p>
<pre><code>boolean contains(array|string $subject, array|object|string|number|boolean $search)
</code></pre>
<p>Returns <code>true</code> if the given <code>$subject</code> contains the provided <code>$search</code>
string.</p>
<p>If <code>$subject</code> is an array, this function returns true if one of the elements
in the array is equal to the provided <code>$search</code> value.</p>
<p>If the provided <code>$subject</code> is a string, this function returns true if
the string contains the provided <code>$search</code> argument.</p>
<h3 id="examples-3"><a class="header" href="#examples-3">Examples</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Given</th><th>Expression</th><th>Result</th></tr></thead><tbody>
<tr><td>n/a</td><td><code>contains(`foobar`, `foo`)</code></td><td><code>true</code></td></tr>
<tr><td>n/a</td><td><code>contains(`foobar`, `not`)</code></td><td><code>false</code></td></tr>
<tr><td>n/a</td><td><code>contains(`foobar`, `bar`)</code></td><td><code>true</code></td></tr>
<tr><td>n/a</td><td><code>contains(`false`, `bar`)</code></td><td><code>&lt;error: invalid-type&gt;</code></td></tr>
<tr><td>n/a</td><td><code>contains(`foobar`, 123)</code></td><td><code>false</code></td></tr>
<tr><td><code>[&quot;a&quot;, &quot;b&quot;]</code></td><td><code>contains(@, `a`)</code></td><td><code>true</code></td></tr>
<tr><td><code>[&quot;a&quot;]</code></td><td><code>contains(@, `a\`)</code></td><td><code>true</code></td></tr>
<tr><td><code>[&quot;a&quot;]</code></td><td><code>contains(@, `b\`)</code></td><td><code>false</code></td></tr>
</tbody></table>
</div>
<h3 id="floor"><a class="header" href="#floor">floor</a></h3>
<pre><code>number floor(number $value)
</code></pre>
<p>Returns the next lowest integer value by rounding down if necessary.</p>
<h3 id="examples-4"><a class="header" href="#examples-4">Examples</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Expression</th><th>Result</th></tr></thead><tbody>
<tr><td><code>floor(`1.001\`)</code></td><td>1</td></tr>
<tr><td><code>floor(`1.9\`)</code></td><td>1</td></tr>
<tr><td><code>floor(`1\`)</code></td><td>1</td></tr>
</tbody></table>
</div>
<h3 id="join"><a class="header" href="#join">join</a></h3>
<pre><code>string join(string $glue, array[string] $stringsarray)
</code></pre>
<p>Returns all of the elements from the provided <code>$stringsarray</code> array joined
together using the <code>$glue</code> argument as a separator between each.</p>
<h3 id="examples-5"><a class="header" href="#examples-5">Examples</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Given</th><th>Expression</th><th>Result</th></tr></thead><tbody>
<tr><td><code>[&quot;a&quot;, &quot;b&quot;]</code></td><td><code>join(`, `, @)</code></td><td>&quot;a, b&quot;</td></tr>
<tr><td><code>[&quot;a&quot;, &quot;b&quot;]</code></td><td><code>join(``, @) </code></td><td>&quot;ab&quot;</td></tr>
<tr><td><code>[&quot;a&quot;, false, &quot;b&quot;]</code></td><td><code>join(`, `, @)</code></td><td><code>&lt;error: invalid-type&gt;</code></td></tr>
<tr><td><code>[false]</code></td><td><code>join(`, `, @)</code></td><td><code>&lt;error: invalid-type&gt;</code></td></tr>
</tbody></table>
</div>
<h3 id="keys"><a class="header" href="#keys">keys</a></h3>
<pre><code>array keys(object $obj)
</code></pre>
<p>Returns an array containing the keys of the provided object.</p>
<h3 id="examples-6"><a class="header" href="#examples-6">Examples</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Given</th><th>Expression</th><th>Result</th></tr></thead><tbody>
<tr><td><code>{&quot;foo&quot;: &quot;baz&quot;, &quot;bar&quot;: &quot;bam&quot;}</code></td><td><code>keys(@)</code></td><td><code>[&quot;foo&quot;, &quot;bar&quot;]</code></td></tr>
<tr><td><code>{}</code></td><td><code>keys(@)</code></td><td><code>[]</code></td></tr>
<tr><td><code>false</code></td><td><code>keys(@)</code></td><td><code>&lt;error: invalid-type&gt;</code></td></tr>
<tr><td><code>[b, a, c]</code></td><td><code>keys(@)</code></td><td><code>&lt;error: invalid-type&gt;</code></td></tr>
</tbody></table>
</div>
<h3 id="length"><a class="header" href="#length">length</a></h3>
<pre><code>number length(string|array|object $subject)
</code></pre>
<p>Returns the length of the given argument using the following types rules:</p>
<ol>
<li>
<p>string: returns the number of code points in the string</p>
</li>
<li>
<p>array: returns the number of elements in the array</p>
</li>
<li>
<p>object: returns the number of key-value pairs in the object</p>
</li>
</ol>
<h3 id="examples-7"><a class="header" href="#examples-7">Examples</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Given</th><th>Expression</th><th>Result</th></tr></thead><tbody>
<tr><td>n/a</td><td><code>length(`abc`)</code></td><td>3</td></tr>
<tr><td>&quot;current&quot;</td><td><code>length(@)</code></td><td>7</td></tr>
<tr><td>&quot;current&quot;</td><td><code>length(not_there)</code></td><td><code>&lt;error: invalid-type&gt;</code></td></tr>
<tr><td><code>[&quot;a&quot;, &quot;b&quot;, &quot;c&quot;]</code></td><td><code>length(@)</code></td><td>3</td></tr>
<tr><td><code>[]</code></td><td><code>length(@)</code></td><td>0</td></tr>
<tr><td><code>{}</code></td><td><code>length(@)</code></td><td>0</td></tr>
<tr><td><code>{&quot;foo&quot;: &quot;bar&quot;, &quot;baz&quot;: &quot;bam&quot;}</code></td><td><code>length(@)</code></td><td>2</td></tr>
</tbody></table>
</div>
<h3 id="max"><a class="header" href="#max">max</a></h3>
<pre><code>number max(array[number] $collection)
</code></pre>
<p>Returns the highest found number in the provided array argument.</p>
<p>An empty array will produce a return value of null.</p>
<h3 id="examples-8"><a class="header" href="#examples-8">Examples</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Given</th><th>Expression</th><th>Result</th></tr></thead><tbody>
<tr><td><code>[10, 15]</code></td><td><code>max(@)</code></td><td>15</td></tr>
<tr><td><code>[10, false, 20]</code></td><td><code>max(@)</code></td><td><code>&lt;error: invalid-type&gt;</code></td></tr>
</tbody></table>
</div>
<h3 id="min"><a class="header" href="#min">min</a></h3>
<pre><code>number min(array[number] $collection)
</code></pre>
<p>Returns the lowest found number in the provided <code>$collection</code> argument.</p>
<h3 id="examples-9"><a class="header" href="#examples-9">Examples</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Given</th><th>Expression</th><th>Result</th></tr></thead><tbody>
<tr><td><code>[10, 15]</code></td><td><code>min(@)</code></td><td>10</td></tr>
<tr><td><code>[10, false, 20]</code></td><td><code>min(@)</code></td><td><code>&lt;error: invalid-type&gt;</code></td></tr>
</tbody></table>
</div>
<h3 id="sort"><a class="header" href="#sort">sort</a></h3>
<pre><code>array sort(array $list)
</code></pre>
<p>This function accepts an array <code>$list</code> argument and returns the sorted
elements of the <code>$list</code> as an array.</p>
<p>The array must be a list of strings or numbers.  Sorting strings is based on
code points.  Locale is not taken into account.</p>
<h3 id="examples-10"><a class="header" href="#examples-10">Examples</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Given</th><th>Expression</th><th>Result</th></tr></thead><tbody>
<tr><td><code>[b, a, c]</code></td><td><code>sort(@)</code></td><td><code>[a, b, c]</code></td></tr>
<tr><td><code>[1, a, c]</code></td><td><code>sort(@)</code></td><td><code>[1, a, c]</code></td></tr>
<tr><td><code>[false, [], null]</code></td><td><code>sort(@)</code></td><td><code>[[], null, false]</code></td></tr>
<tr><td><code>[[], {}, false]</code></td><td><code>sort(@)</code></td><td><code>[{}, [], false]</code></td></tr>
<tr><td><code>{&quot;a&quot;: 1, &quot;b&quot;: 2}</code></td><td><code>sort(@)</code></td><td><code>null</code></td></tr>
<tr><td><code>false</code></td><td><code>sort(@)</code></td><td><code>null</code></td></tr>
<tr><td></td><td></td><td></td></tr>
</tbody></table>
</div>
<h3 id="to_string"><a class="header" href="#to_string">to_string</a></h3>
<pre><code>string to_string(string|number|array|object|boolean $arg)
</code></pre>
<ul>
<li>
<p>string - Returns the passed in value.</p>
</li>
<li>
<p>number/array/object/boolean - The JSON encoded value of the object.  The
JSON encoder should emit the encoded JSON value without adding any additional
new lines.</p>
</li>
</ul>
<h3 id="examples-11"><a class="header" href="#examples-11">Examples</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Given</th><th>Expression</th><th>Result</th></tr></thead><tbody>
<tr><td><code>null</code></td><td><code>to_string(`2`)</code></td><td><code>&quot;2&quot;</code></td></tr>
</tbody></table>
</div>
<h3 id="to_number"><a class="header" href="#to_number">to_number</a></h3>
<pre><code>number to_number(string|number $arg)
</code></pre>
<ul>
<li>
<p>string - Returns the parsed number.  Any string that conforms to the
<code>json-number</code> production is supported.</p>
</li>
<li>
<p>number - Returns the passed in value.</p>
</li>
<li>
<p>array - null</p>
</li>
<li>
<p>object - null</p>
</li>
<li>
<p>boolean - null</p>
</li>
</ul>
<h3 id="type"><a class="header" href="#type">type</a></h3>
<pre><code>string type(array|object|string|number|boolean|null $subject)
</code></pre>
<p>Returns the JavaScript type of the given <code>$subject</code> argument as a string
value.</p>
<p>The return value MUST be one of the following:</p>
<ul>
<li>number</li>
<li>string</li>
<li>boolean</li>
<li>array</li>
<li>object</li>
<li>null</li>
</ul>
<h3 id="examples-12"><a class="header" href="#examples-12">Examples</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Given</th><th>Expression</th><th>Result</th></tr></thead><tbody>
<tr><td>&quot;foo&quot;</td><td><code>type(@)</code></td><td>&quot;string&quot;</td></tr>
<tr><td><code>true</code></td><td><code>type(@)</code></td><td>&quot;boolean&quot;</td></tr>
<tr><td><code>false</code></td><td><code>type(@)</code></td><td>&quot;boolean&quot;</td></tr>
<tr><td><code>null</code></td><td><code>type(@)</code></td><td>&quot;null&quot;</td></tr>
<tr><td>123</td><td><code>type(@)</code></td><td>number</td></tr>
<tr><td>123.05</td><td><code>type(@)</code></td><td>number</td></tr>
<tr><td><code>[&quot;abc&quot;]</code></td><td><code>type(@)</code></td><td>&quot;array&quot;</td></tr>
<tr><td><code>{&quot;abc&quot;: &quot;123&quot;}</code></td><td><code>type(@)</code></td><td>&quot;object&quot;</td></tr>
</tbody></table>
</div>
<h3 id="values"><a class="header" href="#values">values</a></h3>
<pre><code>array values(object $obj)
</code></pre>
<p>Returns the values of the provided object.</p>
<h3 id="examples-13"><a class="header" href="#examples-13">Examples</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Given</th><th>Expression</th><th>Result</th></tr></thead><tbody>
<tr><td><code>{&quot;foo&quot;: &quot;baz&quot;, &quot;bar&quot;: &quot;bam&quot;}</code></td><td><code>values(@)</code></td><td><code>[&quot;baz&quot;, &quot;bam&quot;]</code></td></tr>
<tr><td><code>[&quot;a&quot;, &quot;b&quot;]</code></td><td><code>values(@)</code></td><td><code>&lt;error: invalid-type&gt;</code></td></tr>
<tr><td><code>false</code></td><td><code>values(@)</code></td><td><code>&lt;error: invalid-type&gt;</code></td></tr>
</tbody></table>
</div>
<h2 id="compliance-tests"><a class="header" href="#compliance-tests">Compliance Tests</a></h2>
<p>A <code>functions.json</code> will be added to the compliance test suite.
The test suite will add the following new error types:</p>
<ul>
<li>unknown-function</li>
<li>invalid-arity</li>
<li>invalid-type</li>
</ul>
<p>The compliance does not specify <strong>when</strong> the errors are raised, as this will
depend on implementation details.  For an implementation to be compliant they
need to indicate that an error occurred while attempting to evaluate the
JMESPath expression.</p>
<h2 id="history"><a class="header" href="#history">History</a></h2>
<ul>
<li>
<p>This JEP originally proposed the literal syntax. The literal portion of this
JEP was removed and added instead to JEP 7.</p>
</li>
<li>
<p>This JEP originally specified that types matches should return null.  This
has been updated to specify that an invalid type error should occur instead.</p>
</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="0001-nested-expressions.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="0004-pipes.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="0001-nested-expressions.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="0004-pipes.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
